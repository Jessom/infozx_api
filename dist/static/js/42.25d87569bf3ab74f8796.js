webpackJsonp([42],{Sa1W:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{canvas:null,ctx:null,mousePressed:!1,offsetTop:0}},props:{options:{type:Object,default:function(){}}},computed:{opt:function(){return mui.extend({},{background:"#fff",lineWidth:1,lineColor:"#000000",height:200,offsetTop:0},this.options)}},mounted:function(){this.lastX,this.lastY,this.canvas=document.querySelector("#z-draw-canvas"),this.canvas.width=window.screen.width,this.ctx=this.canvas.getContext("2d"),this.setBackground(),this.init()},methods:{init:function(){var t=this;t.canvas.addEventListener("touchstart",function(e){if(1==e.targetTouches.length){e.preventDefault();var n=e.targetTouches[0],i=t.opt.offsetTop||this.offsetTop;t.mousePressed=!0,t.draw(n.pageX-this.offsetLeft,n.pageY-i,!1)}},!1),t.canvas.addEventListener("touchmove",function(e){if(1==e.targetTouches.length){e.preventDefault();var n=e.targetTouches[0],i=t.opt.offsetTop||this.offsetTop;t.mousePressed&&t.draw(n.pageX-this.offsetLeft,n.pageY-i,!0)}},!1),t.canvas.addEventListener("touchend",function(e){1==e.targetTouches.length&&(e.preventDefault(),t.mousePressed=!1)},!1)},draw:function(t,e,n){n&&(this.ctx.beginPath(),this.ctx.strokeStyle=this.opt.lineColor,this.ctx.lineWidth=this.lineWidth,this.ctx.lineJoin="round",this.ctx.moveTo(this.lastX,this.lastY),this.ctx.lineTo(t,e),this.ctx.closePath(),this.ctx.stroke()),this.lastX=t,this.lastY=e},clear:function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.setBackground()},save:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/jpeg";return this.canvas.toDataURL(t)},setBackground:function(){this.ctx.fillStyle=this.opt.background,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("canvas",{attrs:{id:"z-draw-canvas",height:this.opt.height}})])},staticRenderFns:[]};var o={data:function(){return{image:"",options:{background:"#ffffff",lineWidth:1,lineColor:"#000000",height:150}}},methods:{clear:function(){this.$refs.draw.clear()},save:function(){this.image=this.$refs.draw.save()}},components:{Draw:n("VU/8")(i,s,!1,function(t){n("Y+cd")},null,null).exports}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("draw",{ref:"draw",attrs:{options:t.options}}),t._v(" "),n("div",{staticClass:"mui-input-group"},[n("div",{staticClass:"mui-input-row"},[n("label",[t._v("线条粗细")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.options.lineWidth,expression:"options.lineWidth",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.options.lineWidth},on:{input:function(e){e.target.composing||t.$set(t.options,"lineWidth",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"mui-input-row"},[n("label",[t._v("线条颜色")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.options.lineColor,expression:"options.lineColor"}],attrs:{type:"color"},domProps:{value:t.options.lineColor},on:{input:function(e){e.target.composing||t.$set(t.options,"lineColor",e.target.value)}}})])]),t._v(" "),n("button",{on:{tap:t.clear}},[t._v("清除")]),t._v(" "),n("button",{on:{tap:t.save}},[t._v("保存")]),t._v(" "),n("img",{attrs:{src:t.image}})],1)},staticRenderFns:[]};var r=n("VU/8")(o,a,!1,function(t){n("ueII")},null,null);e.default=r.exports},"Y+cd":function(t,e){},ueII:function(t,e){}});
//# sourceMappingURL=42.25d87569bf3ab74f8796.js.map