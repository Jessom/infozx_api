{"version":3,"sources":["webpack:///src/views/test.vue","webpack:///./src/views/test.vue?6e2a","webpack:///./src/views/test.vue","webpack:///src/components/Other/Draw.vue","webpack:///./src/components/Other/Draw.vue?ba6c","webpack:///./src/components/Other/Draw.vue"],"names":["test","data","options","background","lineWidth","lineColor","height","offsetTop","panel","id","style","methods","mui","popover","this","document","querySelector","components","Draw","SidePanel","views_test","render","_h","$createElement","_c","_self","staticClass","attrs","ref","_v","on","tap","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","canvas","ctx","mousePressed","props","type","Object","default","computed","opt","extend","mounted","lastX","lastY","width","window","screen","getContext","setBackground","init","self","addEventListener","event","targetTouches","length","preventDefault","touch","ot","draw","pageX","offsetLeft","pageY","x","y","isDown","beginPath","strokeStyle","lineJoin","moveTo","lineTo","closePath","stroke","clear","setTransform","clearRect","save","arguments","undefined","toDataURL","fillStyle","fillRect","Other_Draw","ssrContext"],"mappings":"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","file":"static/js/43.d802c07337c4baab3f1f.js","sourcesContent":["<template>\r\n\t<div class=\"test\">\r\n\t\t<SidePanel :options='panel'>\r\n\t\t\t<draw :options='options' ref='draw' />\r\n\t\t</SidePanel>\r\n\r\n\t\t<button @tap='test'>打开</button>\r\n\r\n\t\t<!-- <draw :options='options' ref='draw2' /> -->\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Draw from '@/components/Other/Draw.vue'\r\nimport SidePanel from '@/components/Other/SidePanel.vue'\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\toptions: {\r\n\t\t\t\tbackground: '#ffffff',\r\n\t\t\t\tlineWidth: 1,\r\n\t\t\t\tlineColor: '#000000',\r\n\t\t\t\theight: 'auto',\r\n\t\t\t\toffsetTop: 0\r\n\t\t\t},\r\n\t\t\tpanel: {\r\n\t\t\t\tid: 'panel',\r\n\t\t\t\tstyle: 'bottom'\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\ttest() {\r\n\t\t\tmui('#panel').popover('toggle')\r\n\t\t\tthis.options['offsetTop'] = document.querySelector('#panel').offsetTop\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tDraw,\r\n\t\tSidePanel\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/test.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"test\"},[_c('SidePanel',{attrs:{\"options\":_vm.panel}},[_c('draw',{ref:\"draw\",attrs:{\"options\":_vm.options}})],1),_vm._v(\" \"),_c('button',{on:{\"tap\":_vm.test}},[_vm._v(\"打开\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ed1b66f4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/test.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./test.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./test.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ed1b66f4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./test.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/test.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <canvas id='z-draw-canvas' :height=\"opt.height\"></canvas>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      canvas: null,\r\n      ctx: null,\r\n      mousePressed: false,\r\n      offsetTop: 0\r\n    }\r\n  },\r\n  props: {\r\n    options: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  computed: {\r\n    opt() {\r\n      let opt = {\r\n        background: '#fff',\r\n        lineWidth: 1,\r\n        lineColor: '#000000',\r\n        height: 200,\r\n        offsetTop: 0\r\n      }\r\n      return mui.extend({}, opt, this.options)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.lastX, this.lastY\r\n    this.canvas = document.querySelector('#z-draw-canvas')\r\n    this.canvas.width = window.screen.width\r\n    this.ctx = this.canvas.getContext('2d')\r\n    this.setBackground();\r\n    this.init()\r\n  },\r\n  methods:{\r\n    init() {\r\n      const self = this\r\n      // 点击屏幕\r\n      self.canvas.addEventListener('touchstart', function (event) {\r\n        if (event.targetTouches.length == 1) {\r\n          event.preventDefault();\r\n          const touch = event.targetTouches[0];\r\n          // let ot = window.screen.height - this.offsetTop\r\n          const ot = self.opt.offsetTop || this.offsetTop\r\n          self.mousePressed = true;\r\n          self.draw(touch.pageX - this.offsetLeft, touch.pageY - ot, false);\r\n        }\r\n      }, false);\r\n\r\n      // 在屏幕上移动\r\n      self.canvas.addEventListener('touchmove', function (event) {\r\n        if (event.targetTouches.length == 1) {\r\n          event.preventDefault();\r\n          const touch = event.targetTouches[0];\r\n          // let ot = window.screen.height - this.offsetTop\r\n          const ot = self.opt.offsetTop || this.offsetTop\r\n          if(self.mousePressed) {\r\n            self.draw(touch.pageX - this.offsetLeft, touch.pageY - ot, true);\r\n          }\r\n        }\r\n      }, false);\r\n\r\n      // 手指离开屏幕\r\n      self.canvas.addEventListener('touchend', function (event) {\r\n        if (event.targetTouches.length == 1) {\r\n          event.preventDefault();\r\n          // const touch = event.targetTouches[0];\r\n          self.mousePressed = false;\r\n        }\r\n      }, false);\r\n    },\r\n    // 绘制内容\r\n    draw(x, y, isDown) {\r\n      if(isDown) {\r\n        this.ctx.beginPath();\r\n        this.ctx.strokeStyle = this.opt.lineColor;\r\n        this.ctx.lineWidth = this.lineWidth;\r\n        this.ctx.lineJoin = \"round\";\r\n        this.ctx.moveTo(this.lastX, this.lastY);\r\n        this.ctx.lineTo(x, y);\r\n        this.ctx.closePath();\r\n        this.ctx.stroke();\r\n      }\r\n      this.lastX = x\r\n      this.lastY = y\r\n    },\r\n    // 清除 flag是否渲染提示文字\r\n    clear() {\r\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n      this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n      this.setBackground();\r\n    },\r\n    save(type='image/jpeg') {\r\n      // this.image = this.canvas.toDataURL(\"\");\r\n      return this.canvas.toDataURL(type);\r\n    },\r\n    // 绘制canvas背景色\r\n    setBackground() {\r\n      this.ctx.fillStyle = this.opt.background;\r\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n  }\r\n}\r\n</script>\r\n \r\n<style lang='scss'>\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/Other/Draw.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('canvas',{attrs:{\"id\":\"z-draw-canvas\",\"height\":_vm.opt.height}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a60dd23\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Other/Draw.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2a60dd23\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Draw.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Draw.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Draw.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a60dd23\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Draw.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Other/Draw.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}