{"version":3,"sources":["webpack:///src/views/components/other/draw.vue","webpack:///./src/views/components/other/draw.vue?f629","webpack:///./src/views/components/other/draw.vue","webpack:///src/components/Other/Draw.vue","webpack:///./src/components/Other/Draw.vue?ba6c","webpack:///./src/components/Other/Draw.vue"],"names":["draw","data","image","options","background","lineWidth","lineColor","height","methods","clear","this","$refs","save","components","Draw","other_draw","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","_v","directives","name","rawName","value","expression","modifiers","number","type","domProps","on","input","$event","target","composing","$set","_n","blur","$forceUpdate","tap","src","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","canvas","ctx","mousePressed","offsetTop","props","Object","default","computed","opt","mui","extend","mounted","lastX","lastY","document","querySelector","width","window","screen","getContext","setBackground","init","self","addEventListener","event","targetTouches","length","preventDefault","touch","ot","pageX","offsetLeft","pageY","x","y","isDown","beginPath","strokeStyle","lineJoin","moveTo","lineTo","closePath","stroke","setTransform","clearRect","arguments","undefined","toDataURL","fillStyle","fillRect","Other_Draw","id"],"mappings":"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","file":"static/js/19.688b2dfd4bcda6694200.js","sourcesContent":["<template lang=\"html\">\r\n  <div class=\"container\">\r\n  \t<draw ref='draw' :options='options' />\r\n  \t<div class=\"mui-input-group\">\r\n  \t\t<div class=\"mui-input-row\">\r\n  \t\t\t<label>线条粗细</label>\r\n  \t\t\t<input type=\"number\" v-model.number='options.lineWidth'>\r\n  \t\t</div>\r\n  \t\t<div class=\"mui-input-row\">\r\n  \t\t\t<label>线条颜色</label>\r\n  \t\t\t<input type=\"color\" v-model='options.lineColor'>\r\n  \t\t</div>\r\n  \t</div>\r\n  \t<button @tap='clear'>清除</button>\r\n  \t<button @tap='save'>保存</button>\r\n  \t<img :src=\"image\">\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Draw from '@/components/Other/Draw.vue'\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\timage: '',\r\n\t\t\toptions: {\r\n\t\t\t\tbackground: '#ffffff',\r\n\t\t\t\tlineWidth: 1,\r\n\t\t\t\tlineColor: '#000000',\r\n\t\t\t\theight: 150\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tclear() {\r\n\t\t\tthis.$refs.draw.clear()\r\n\t\t},\r\n\t\tsave() {\r\n\t\t\tthis.image = this.$refs.draw.save()\r\n\t\t\t// this.clear()\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tDraw\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/components/other/draw.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('draw',{ref:\"draw\",attrs:{\"options\":_vm.options}}),_vm._v(\" \"),_c('div',{staticClass:\"mui-input-group\"},[_c('div',{staticClass:\"mui-input-row\"},[_c('label',[_vm._v(\"线条粗细\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.options.lineWidth),expression:\"options.lineWidth\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.options.lineWidth)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.options, \"lineWidth\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}})]),_vm._v(\" \"),_c('div',{staticClass:\"mui-input-row\"},[_c('label',[_vm._v(\"线条颜色\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.options.lineColor),expression:\"options.lineColor\"}],attrs:{\"type\":\"color\"},domProps:{\"value\":(_vm.options.lineColor)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.options, \"lineColor\", $event.target.value)}}})])]),_vm._v(\" \"),_c('button',{on:{\"tap\":_vm.clear}},[_vm._v(\"清除\")]),_vm._v(\" \"),_c('button',{on:{\"tap\":_vm.save}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.image}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5ddf94c9\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/components/other/draw.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ddf94c9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./draw.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./draw.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./draw.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ddf94c9\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./draw.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/components/other/draw.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <canvas id='z-draw-canvas' :height=\"opt.height\"></canvas>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      canvas: null,\r\n      ctx: null,\r\n      mousePressed: false,\r\n      offsetTop: 0\r\n    }\r\n  },\r\n  props: {\r\n    options: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  computed: {\r\n    opt() {\r\n      let opt = {\r\n        background: '#fff',\r\n        lineWidth: 1,\r\n        lineColor: '#000000',\r\n        height: 200,\r\n        offsetTop: 0\r\n      }\r\n      return mui.extend({}, opt, this.options)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.lastX, this.lastY\r\n    this.canvas = document.querySelector('#z-draw-canvas')\r\n    this.canvas.width = window.screen.width\r\n    this.ctx = this.canvas.getContext('2d')\r\n    this.setBackground();\r\n    this.init()\r\n  },\r\n  methods:{\r\n    init() {\r\n      const self = this\r\n      // 点击屏幕\r\n      self.canvas.addEventListener('touchstart', function (event) {\r\n        if (event.targetTouches.length == 1) {\r\n          event.preventDefault();\r\n          const touch = event.targetTouches[0];\r\n          // let ot = window.screen.height - this.offsetTop\r\n          const ot = self.opt.offsetTop || this.offsetTop\r\n          self.mousePressed = true;\r\n          self.draw(touch.pageX - this.offsetLeft, touch.pageY - ot, false);\r\n        }\r\n      }, false);\r\n\r\n      // 在屏幕上移动\r\n      self.canvas.addEventListener('touchmove', function (event) {\r\n        if (event.targetTouches.length == 1) {\r\n          event.preventDefault();\r\n          const touch = event.targetTouches[0];\r\n          // let ot = window.screen.height - this.offsetTop\r\n          const ot = self.opt.offsetTop || this.offsetTop\r\n          if(self.mousePressed) {\r\n            self.draw(touch.pageX - this.offsetLeft, touch.pageY - ot, true);\r\n          }\r\n        }\r\n      }, false);\r\n\r\n      // 手指离开屏幕\r\n      self.canvas.addEventListener('touchend', function (event) {\r\n        if (event.targetTouches.length == 1) {\r\n          event.preventDefault();\r\n          // const touch = event.targetTouches[0];\r\n          self.mousePressed = false;\r\n        }\r\n      }, false);\r\n    },\r\n    // 绘制内容\r\n    draw(x, y, isDown) {\r\n      if(isDown) {\r\n        this.ctx.beginPath();\r\n        this.ctx.strokeStyle = this.opt.lineColor;\r\n        this.ctx.lineWidth = this.lineWidth;\r\n        this.ctx.lineJoin = \"round\";\r\n        this.ctx.moveTo(this.lastX, this.lastY);\r\n        this.ctx.lineTo(x, y);\r\n        this.ctx.closePath();\r\n        this.ctx.stroke();\r\n      }\r\n      this.lastX = x\r\n      this.lastY = y\r\n    },\r\n    // 清除 flag是否渲染提示文字\r\n    clear() {\r\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n      this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n      this.setBackground();\r\n    },\r\n    save(type='image/jpeg') {\r\n      // this.image = this.canvas.toDataURL(\"\");\r\n      return this.canvas.toDataURL(type);\r\n    },\r\n    // 绘制canvas背景色\r\n    setBackground() {\r\n      this.ctx.fillStyle = this.opt.background;\r\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n  }\r\n}\r\n</script>\r\n \r\n<style lang='scss'>\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/Other/Draw.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('canvas',{attrs:{\"id\":\"z-draw-canvas\",\"height\":_vm.opt.height}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a60dd23\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Other/Draw.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2a60dd23\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Draw.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Draw.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Draw.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a60dd23\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Draw.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Other/Draw.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}